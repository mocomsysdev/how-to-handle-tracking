3.2.1 메시지 설계

각 채널에서 수집되는 로그 메시지의 모양은 다양하므로 로그시스템 안에서 해들링되는 메시지의 형태를 하나의 표준화된 형식으로 통일한다면 애플리케이션 개발 시 복잡도를 줄일 수 있게됩니다.

이이를 위해서 표준 메시지를 정의해 보겠습니다.
일단 메시지의 도메인은 EAI 로그(트래킹) 시스템에 사용된다는 전제하에 설계를 진행합니다.

[필수 항목]

AS-IS 트래킹로그 컬럼을 모두 포함합니다.

*표 표시는 필수값을 의미합니다.
```
*  1) 호스트 ID
*  2) 인터페이스 ID
*  3) 메시지 DATE (YYYYMMDDHH24MISSssssss)
*  4) 프로세스 ID
*  5) 프로세스 DATE (YYYYMMDDHH24MISSssssss)
*  6) 프로세스 TYPE ( 송신, 허브, 수신 )
*  7) 상태 (성공, 에러)
*  8) 수신노드 개수
*  9) 노드 증가값 
  10) 타임존 
  11) 이전호스트 ID
  12) 이전프로세스 ID
  13) OS
  14) IP
  15) 에러코드
  16) 에러메시지
  17) 레코드건수
  18) 데이터사이즈
  19) 압축구분
  20) 거래데이터
```
현행 시스템에서 발생되고 있는 로그는 위의 컬럼을 포함하고 있으며 새로운 시스템에 추가할 컬럼을 추가하여 새로운 메시지 형식을 설계하도록 하겠습니다.

위 필수 항목을 기준으로 데이터셋을 정의해 보면 다음과 같습니다.

| id                | nm    |
|        :---       | :--- |
| id                | 아이디 |  
|	integrationId     | 인터페이스 ID |
|	originHostId      | 발생지 호스트 ID |
|	date              | 인터페이스 발생일시 |
|	processId         | 실행 프로세스 ID  |
|	processDate       | 실행 시작 시간 |
|	processEndDate    | 실행 종료 시간 |
|	timezone          | 타임존 |
|	elapsedTime       | 실행시간 |
|	type              | 유형(송신,허브,수신) |
|	seq               | 순번 |
|	previousHostId    | 이전 호스트 ID |
|	previousProcessId | 이전 프로세스 ID |
|	hostId            | 현재노드 프로세스 ID |
|	os                | os |
|	ip                | ip address |
|	status            | 처리상태(완료, 실패) |
|	errorCode         | 에러코드 |
|	errorMessage      | 에러메시지 |
|	recordCount       | 처리레코드건수 |
|	dataSize          | 처리데이터사이즈 |
|	compress          | 압축구분 |
|	app               | 애플리케이션명 |
|	data              | 데이터 |
|	todoNodeCount     | 처리할 수신노드 개수 |
|	regId             | 등록 ID |
|	regDate           | 등록일시 |